# Types
type AuthResponse {
  success: Boolean!
  message: String
  errors: [String]
  token: String
  user: User
}

type TodoResponse {
  success: Boolean!
  message: String
  errors: [String]
  todo: Todo
}

type User {
  id: ID!,
  name: String!,
  email: String!,
  todos: [Todo!]! @hasMany # list of todos for the user
}

type Todo {
  id: ID!,
  title: String!,
  description: String!,
  completed: Boolean,
  created_at: String!,
  user: User! @belongsTo # relation to user
}

# Queries (for getting data)
type Query {
  # get todos of authenticated user
  todos: [Todo!]!
  @guard
  @field(resolver: "App\\GraphQL\\TodoResolver@todos")
  # get specific todo by id
  todo(id: ID): Todo 
  @guard
  @field(resolver: "App\\GraphQL\\TodoResolver@todo")
}

# Mutation (this for changing or adding or deleting data)
type Mutation {
  # register
  register(name: String!, email: String!, password: String): AuthResponse
  @field(resolver: "App\\GraphQL\\AuthResolver@register")

  #lofin
  login(email: String!, password: String!): AuthResponse
  @field(resolver: "App\\GraphQL\\AuthResolver@login")

  # logout
  logout: Boolean!
  @field(resolver: "App\\GraphQL\\AuthResolver@logout")

  # create new todo for authenticated user
  createTodo(title: String!, description: String!): TodoResponse 
  @guard
  @field(resolver: "App\\GraphQL\\TodoResolver@create")

  # update todo
  updateTodo(id: ID!,title: String!, description: String!): TodoResponse
  @guard
  @field(resolver: "App\\GraphQL\\TodoResolver@update")

  # delete todo
  deleteTodo(id: ID!): TodoResponse
  @guard
  @field(resolver: "App\\GraphQL\\TodoResolver@delete")

  # mark as completed or not
  markTodoAsCompletedOrNot(id: ID!): TodoResponse
  @guard
  @field(resolver: "App\\GraphQL\\TodoResolver@markAsCompletedOrNot")
}